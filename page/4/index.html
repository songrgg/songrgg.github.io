<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Blog | Songrgg</title><meta description="A place to share programming experience and understanding of architecture."><meta property="og:type" content="website"><meta property="og:title" content="Blog | Songrgg"><meta property="og:url" content="https://songrgg.github.io/"><meta property="og:site_name" content="Blog | Songrgg"><meta property="og:description" content="A place to share programming experience and understanding of architecture."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://songrgg.github.io/img/og_image.png"><meta property="article:author" content="songrgg"><meta property="article:tag" content="programming"><meta property="article:tag" content="sre"><meta property="article:tag" content="kubernetes"><meta property="article:tag" content="service mesh"><meta property="article:tag" content="devops"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://songrgg.github.io"},"headline":"Blog | Songrgg","image":["https://songrgg.github.io/img/og_image.png"],"author":{"@type":"Person","name":"songrgg"},"description":"A place to share programming experience and understanding of architecture."}</script><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><!--!--><script src="https://www.googletagmanager.com/gtag/js?id=UA-74431120-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-74431120-1');</script><!--!--><link rel="alternate" href="/atom.xml" title="Blog | Songrgg" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">SongRong&#039;s Experience</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-06-02T22:00:00.000Z" title="2017-06-02T22:00:00.000Z">2017-06-03</time><span class="level-item"><a class="link-muted" href="/categories/programming/">programming</a></span><span class="level-item">7 minutes read (About 1116 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/programming/rate-limiter-for-distributed-system/">分布式系统频次限制实现</a></h1><div class="content"><p>频次限制（rate limiting）是Web系统比较常见的功能，防止用户频繁访问接口，导致系统负载增加而影响服务的质量。这里来介绍在分布式系统中实现一个共享的频次限制服务，且保证接口低时延高访问量。</p></div><a class="article-more button is-small size-small" href="/programming/rate-limiter-for-distributed-system/#more">Read More</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-04-17T22:00:00.000Z" title="2017-04-17T22:00:00.000Z">2017-04-18</time><span class="level-item"><a class="link-muted" href="/categories/operation/">operation</a></span><span class="level-item">6 minutes read (About 898 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/operation/build-ci-with-gitlab/">基于gitlab搭建CI</a></h1><div class="content"><h4 id="自建gitlab"><a href="#自建gitlab" class="headerlink" title="自建gitlab"></a>自建gitlab</h4><p>自建gitlab一大优势是<strong>快</strong>，之前用翻墙走github速度也在1M/s左右，可是自建的gitlab提升了建立连接的速度，可以说体验又上升了一个档次。</p>
<p>用docker起一个gitlab服务尤其方便 <a href="https://docs.gitlab.com/omnibus/docker/README.html">GitLab Docker images</a></p></div><a class="article-more button is-small size-small" href="/operation/build-ci-with-gitlab/#more">Read More</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/microservice/microservice-in-action-4/"><img class="thumbnail" src="/images/config-in-docker.webp" alt="微服务实践四: 配置管理"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-04-14T22:00:00.000Z" title="2017-04-14T22:00:00.000Z">2017-04-15</time><span class="level-item"><a class="link-muted" href="/categories/microservice/">microservice</a></span><span class="level-item">4 minutes read (About 627 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/microservice/microservice-in-action-4/">微服务实践四: 配置管理</a></h1><div class="content"><blockquote>
<p>配置涵盖程序运行的环境，程序依赖的基础资源地址，程序的行为等。</p>
</blockquote>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><ul>
<li>根据环境读取配置</li>
<li>方便更新配置</li>
<li>基础数据格式为<code>list</code>，<code>map</code>等，常见的配置格式是<code>JSON</code>，<code>YAML</code>，<code>XML</code></li>
</ul></div><a class="article-more button is-small size-small" href="/microservice/microservice-in-action-4/#more">Read More</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-04-13T22:00:00.000Z" title="2017-04-13T22:00:00.000Z">2017-04-14</time><span class="level-item"><a class="link-muted" href="/categories/microservice/">microservice</a></span><span class="level-item">5 minutes read (About 738 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/microservice/microservice-in-action-3/">微服务实践三: 服务编排</a></h1><div class="content"><h3 id="物理机部署"><a href="#物理机部署" class="headerlink" title="物理机部署"></a>物理机部署</h3><h4 id="传统发布流程（以Java-spring-boot为例）"><a href="#传统发布流程（以Java-spring-boot为例）" class="headerlink" title="传统发布流程（以Java spring boot为例）"></a>传统发布流程（以Java spring boot为例）</h4><ul>
<li>编译jar包</li>
<li>分发到服务器A,B,C</li>
<li>服务启动，监听到指定端口</li>
<li>配置负载均衡到已启动服务端口</li>
<li>服务发布成功</li>
</ul>
<p>关于服务更新，为了实现滚动更新，可以让LB绑定的服务逐渐更新</p>
<h4 id="传统更新流程"><a href="#传统更新流程" class="headerlink" title="传统更新流程"></a>传统更新流程</h4><ul>
<li>编译jar包</li>
<li>分发到服务器A,B,C</li>
<li>将服务器A从LB上解绑，更新服务器A上的服务</li>
<li>启动服务，通过健康检查和QA之后，将服务器A绑定到LB上</li>
<li>继续更新服务器B和C</li>
<li>服务完全更新成功</li>
</ul>
<h4 id="拓容流程"><a href="#拓容流程" class="headerlink" title="拓容流程"></a>拓容流程</h4><ul>
<li>新增机器节点</li>
<li>启动jar包</li>
<li>将新节点注册到LB上</li>
</ul>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>单机端口有限，同一个服务如果在同一个服务器更新，需要不同的端口</li>
<li>动态更新LB</li>
<li>拓容成本高</li>
</ul>
<h3 id="服务化部署（这里以kubernetes为例）"><a href="#服务化部署（这里以kubernetes为例）" class="headerlink" title="服务化部署（这里以kubernetes为例）"></a>服务化部署（这里以kubernetes为例）</h3><h4 id="k8s发布流程"><a href="#k8s发布流程" class="headerlink" title="k8s发布流程"></a>k8s发布流程</h4><ul>
<li>构建docker镜像</li>
<li>创建deployment和service，可以限制服务的CPU、Memory等资源，k8s寻找空闲节点启动服务</li>
<li>更新iptables将物理机上指定端口路由到VIP(虚拟服务IP)</li>
<li>绑定物理机端口到LB</li>
</ul>
<h4 id="k8s更新流程"><a href="#k8s更新流程" class="headerlink" title="k8s更新流程"></a>k8s更新流程</h4><ul>
<li>构建docker镜像</li>
<li>更新deployment和service，k8s更新某个pod</li>
<li>轮流更新pod，直到所有pod更新完成</li>
</ul>
<h4 id="k8s拓容"><a href="#k8s拓容" class="headerlink" title="k8s拓容"></a>k8s拓容</h4><ul>
<li>寻找空闲节点启动服务，直到达到指定数量</li>
</ul>
<h4 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h4><ul>
<li>几乎无物理端口限制（k8s需要物理端口作为转发，默认为30000+，数量有限）</li>
<li>服务间通信，可以使用serviceName或者服务的VIP进行访问，内网访问更方便</li>
<li>虚拟化物理机资源，隔离物理资源的细节，资源控制如拓容、服务资源限制方便</li>
</ul>
<h3 id="Kubernetes-vs-Docker-swarm"><a href="#Kubernetes-vs-Docker-swarm" class="headerlink" title="Kubernetes vs Docker swarm"></a>Kubernetes vs Docker swarm</h3><ul>
<li>稳定性上，k8s上基于iptables的网络路由比docker swarm的网络更加稳定</li>
<li>配置性上，k8s比docker swarm要复杂，swarm采用manager-worker架构，由manager调度worker，docker 1.12以上对于swarm原生支持，方便启动集群，不过k8s在新版本之后也越来越易于配置</li>
<li>管理系统上，swarm比k8s的UI界面更友好，操作性更强</li>
</ul>
<h3 id="微服务架构下的应用"><a href="#微服务架构下的应用" class="headerlink" title="微服务架构下的应用"></a>微服务架构下的应用</h3><ul>
<li>外部访问可以暴露gateway到LB上，外部通过访问LB进行访问</li>
<li>使用k8s或者swarm，服务间通信可以使用serviceName进行访问，也可以利用容器的IP，使用服务注册进行服务查询</li>
<li>自动拓容，当检测到服务的CPU和内存利用率升高，通过水平拓展，增加服务节点；服务压力减少后，逐渐减少服务节点数量</li>
</ul>
<div><h1>Recommended Posts<span style="font-size:0.45em; color:gray">(Driven by<a href="https://github.com/huiwang/hexo-recommended-posts">Hexo Recommended Posts plugin</a>)</span></h1><ul><li><a href="https://songrgg.github.io/architecture/deeper-understanding-to-envoy/">Anatomy of envoy proxy: the architecture of envoy and how it works</a></li><li><a href="https://songrgg.github.io/operation/istio-version-control-on-k8s/">Istio Version Control On Kubernetes</a></li><li><a href="https://songrgg.github.io/microservice/goodbye-micro/">再见，micro: 迁移go-micro到纯gRPC框架</a></li><li><a href="https://songrgg.github.io/microservice/microservice-in-action-4/">微服务实践四: 配置管理</a></li></ul></div></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-04-01T22:00:00.000Z" title="2017-04-01T22:00:00.000Z">2017-04-02</time><span class="level-item"><a class="link-muted" href="/categories/microservice/">microservice</a></span><span class="level-item">6 minutes read (About 897 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/microservice/microservice-in-action-2/">微服务实践二: 服务容错与降级</a></h1><div class="content"><blockquote>
<p>保证系统能稳定地运行在生产环境是第一要务，就算是服务质量下降，只要仍在工作，那就是万幸。</p>
</blockquote>
<h4 id="常见服务问题"><a href="#常见服务问题" class="headerlink" title="常见服务问题"></a>常见服务问题</h4><ol>
<li><p>服务超时<br>依赖的第三方服务因为某种不可抗力超时了？数据库慢查询拖垮了整个数据库？</p>
</li>
<li><p>服务错误<br>某个服务挂了？</p>
</li>
<li><p>服务负载高<br>突然陡增的访问量？</p>
</li>
</ol>
<h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><ol>
<li><p>限时<br>针对服务超时，可以通过超时控制保证接口的返回，可以通过设置超时时间为1s，尽快返回结果，因为大多数情况下，接口超时一方面影响用户体验，一方面可能是由于后端依赖出现了问题，如负载过高，机器故障等。某个互联网公司曾经说，当系统故障时，fail fast。</p>
</li>
<li><p>fallback<br>有些情况下，即使服务出错，对用户而言，也希望是透明的，无感的，设置一些fallback，做一些服务降级，保证用户的体验，即使这个服务实际上是挂掉的，返回内容是空的或者是旧的，在此故障期间，程序员能赶紧修复，对用户几乎没有造成不良体验。</p>
</li>
<li><p>电路熔断<br>这里的电路熔断是对于后端服务的保护，当错误、超时、负载上升到一定的高度，那么负载再高下去，对后端来说肯定是无法承受，好像和电路熔断一样，这三个因素超过了阈值，客户端就可以停止对后端服务的调用，这个保护的措施，帮助了运维人员能迅速通过增加机器和优化系统，帮助系统度过难关。</p>
</li>
</ol>
<h4 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h4><p><a href="https://github.com/Netflix/Hystrix">Hystrix</a>能保护客户端，服务降级，它的dashboard上有一句标语，<strong>defend your app</strong>，确实，当后端程序能对异常，超时，错误等进行处理，那么客户端能获得的数据能更加稳定统一，同时它也是对后端服务的保护，hystrix有上述的电路熔断机制和用户可以自定义fallback，对服务限时等功能。</p>
<p>hystrix运行流程可见<a href="https://github.com/Netflix/Hystrix/wiki/How-it-Works">How it works</a><br><img src="https://raw.githubusercontent.com/wiki/Netflix/Hystrix/images/hystrix-command-flow-chart.png" alt="How-it-works"></p>
<p>以构建一个对内部RPC调用的HystrixCommand为例:  </p>
<ol>
<li>构建一个HystrixCommand用于RPC调用，设置超时时间为1s，fallback为返回空数据  </li>
<li>如果缓存打开，结果优先从缓存中获取  </li>
<li>如果电路被熔断，尝试fallback  </li>
<li>如果并发量超过限制，尝试fallback  </li>
<li>不然，运行实际的RPC调用，如果调用失败或者超时，尝试fallback</li>
</ol>
<h4 id="根据实际情况设置"><a href="#根据实际情况设置" class="headerlink" title="根据实际情况设置"></a>根据实际情况设置</h4><p>hystrix的超时时间，fallback，并发量都可以根据需要封装的指令进行设置，可以说非常灵活，根据自己的具体业务进行合适的设置，能优化用户体验。</p>
<p>例如：文章列表API依赖的服务超时，可以通过服务降级拉取缓存中的旧数据进行返回，虽然即时性稍逊，但是起码用户能读到几分钟前的文章，在此期间，赶紧修复问题。</p>
<div><h1>Recommended Posts<span style="font-size:0.45em; color:gray">(Driven by<a href="https://github.com/huiwang/hexo-recommended-posts">Hexo Recommended Posts plugin</a>)</span></h1><ul><li><a href="https://songrgg.github.io/architecture/deeper-understanding-to-envoy/">Anatomy of envoy proxy: the architecture of envoy and how it works</a></li><li><a href="https://songrgg.github.io/operation/istio-version-control-on-k8s/">Istio Version Control On Kubernetes</a></li><li><a href="https://songrgg.github.io/microservice/goodbye-micro/">再见，micro: 迁移go-micro到纯gRPC框架</a></li><li><a href="https://songrgg.github.io/microservice/microservice-in-action-4/">微服务实践四: 配置管理</a></li></ul></div></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/microservice/microservice-in-action-1/"><img class="thumbnail" src="/images/Microservice.webp" alt="微服务实践一: 架构图谱"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-03-25T23:00:00.000Z" title="2017-03-25T23:00:00.000Z">2017-03-26</time><span class="level-item"><a class="link-muted" href="/categories/microservice/">microservice</a></span><span class="level-item">4 minutes read (About 571 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/microservice/microservice-in-action-1/">微服务实践一: 架构图谱</a></h1><div class="content"><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><ol>
<li>服务拆分与服务发现</li>
<li>微服务框架选择</li>
<li>服务间通信</li>
<li><a href="/microservice/microservice-in-action-3/">服务编排</a></li>
<li><a href="/microservice/microservice-in-action-4/">配置管理</a></li>
<li><a href="/microservice/microservice-in-action-2/">服务容错与降级</a></li>
<li>监控<ul>
<li>API监控</li>
<li>服务调用链</li>
<li>服务负载</li>
<li>基础依赖监控</li>
</ul>
</li>
<li>日志分析</li>
</ol>
<h3 id="Monolithic-vs-Microservice"><a href="#Monolithic-vs-Microservice" class="headerlink" title="Monolithic vs Microservice"></a>Monolithic vs Microservice</h3><table>
<thead>
<tr>
<th></th>
<th align="center">Monolithic</th>
<th align="right">Microservice</th>
</tr>
</thead>
<tbody><tr>
<td>开发测试</td>
<td align="center">Java类语言项目越大，运行调试需要越多的编译时间，本地调试有较多依赖，况且业务复杂后不易新人上手</td>
<td align="right">只有部分功能的代码，运行更快速，根据业务划分，方便新人上手</td>
</tr>
<tr>
<td>部署</td>
<td align="center">更新整个项目</td>
<td align="right">更新一个微服务</td>
</tr>
<tr>
<td>生产调试</td>
<td align="center">日志集中，调试方便</td>
<td align="right">日志分散，服务依赖复杂；拓容简便</td>
</tr>
</tbody></table>
<p>这两种架构视乎业务的复杂程度和代码量的大小，复杂程度低于一定程度，还是单一应用开发更快速，部署更加容易，因为服务拆分和线上的调试这些都是需要成本，反之，当业务不断增加，代码不断膨胀，服务拆分显得逐渐重要，公共功能能抽出来做成基础服务，各个业务所需的轮子也不需要重新造一遍，反而节省了开发成本，同时对于新人的加入，由于服务职责单一，让新人进来一个一个服务地熟悉，好过于一个大而全的项目。</p>
<h3 id="微服务基础架构"><a href="#微服务基础架构" class="headerlink" title="微服务基础架构"></a>微服务基础架构</h3><p><img src="/images/Microservice.webp" alt="部署架构"></p>
<h3 id="处理流程"><a href="#处理流程" class="headerlink" title="处理流程"></a>处理流程</h3><ol>
<li>浏览器发起下单请求到负载均衡(LB)</li>
<li>负载均衡派发请求到API gateway</li>
<li>API gateway查询服务发现，找到user服务和store服务，将用户信息和商品ID发送给store服务，</li>
<li>store服务查询MySQL，找到商品信息，生成订单信息，将请求发送给payment服务</li>
<li>payment服务根据用户指定的支付渠道，向第三方服务发起请求，存储订单信息，并返回订单状态</li>
<li>store服务 -&gt; API gateway -&gt; LB</li>
<li>LB返回数据到浏览器</li>
</ol>
<h3 id="微服务技术"><a href="#微服务技术" class="headerlink" title="微服务技术"></a>微服务技术</h3><p><img src="/images/Microservice-SKILLS.png" alt="技术图谱"></p>
<div><h1>Recommended Posts<span style="font-size:0.45em; color:gray">(Driven by<a href="https://github.com/huiwang/hexo-recommended-posts">Hexo Recommended Posts plugin</a>)</span></h1><ul><li><a href="https://songrgg.github.io/architecture/deeper-understanding-to-envoy/">Anatomy of envoy proxy: the architecture of envoy and how it works</a></li><li><a href="https://songrgg.github.io/operation/istio-version-control-on-k8s/">Istio Version Control On Kubernetes</a></li><li><a href="https://songrgg.github.io/microservice/goodbye-micro/">再见，micro: 迁移go-micro到纯gRPC框架</a></li><li><a href="https://songrgg.github.io/microservice/microservice-in-action-4/">微服务实践四: 配置管理</a></li></ul></div></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2016-10-21T22:00:00.000Z" title="2016-10-21T22:00:00.000Z">2016-10-22</time><span class="level-item"><a class="link-muted" href="/categories/life/">life</a></span><span class="level-item">2 minutes read (About 347 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/life/raspberry3-docker/">Raspberry 3安装docker</a></h1><div class="content"><h3 id="SD卡制作"><a href="#SD卡制作" class="headerlink" title="SD卡制作"></a>SD卡制作</h3><p>准备一张4GB或者以上的micro sd卡，下载<a href="https://www.raspberrypi.org/downloads/raspbian/">系统镜像</a>，例如raspbian-jessie-lite.img，并使用刷机工具，如<code>Pi filler</code>将其写入sd卡，当然也可以使用命令行的dd，或者其它工具，要注意的是sd卡必须是fat32格式的文件系统，不然树莓派是无法识别的。</p>
<h3 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h3><p>先把所有的线材都连上之后，最后再通电，应该很顺利能看到启动的系统。</p>
<h3 id="设置WIFI"><a href="#设置WIFI" class="headerlink" title="设置WIFI"></a>设置WIFI</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'network=&#123;</span></span><br><span class="line"><span class="string">  ssid="your-ssid"</span></span><br><span class="line"><span class="string">  psk="your-psk"</span></span><br><span class="line"><span class="string">&#125;'</span> | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf</span><br></pre></td></tr></table></figure>

<p>如果你的WIFI设置没有启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ifconfig wlan0 up</span><br></pre></td></tr></table></figure>

<h3 id="设置apt国内镜像"><a href="#设置apt国内镜像" class="headerlink" title="设置apt国内镜像"></a>设置apt国内镜像</h3><p>阿里云的镜像还是很快的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'deb http://mirrors.aliyun.com/raspbian/raspbian/ wheezy main non-free contrib\ndeb-src http://mirrors.aliyun.com/raspbian/raspbian/ wheezy main non-free contrib'</span> | sudo tee /etc/apt/sources.list.d/hypriot.list</span><br></pre></td></tr></table></figure>


<h3 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ssh pi@raspberrypi.local</span><br><span class="line">sudo apt-get install -y apt-transport-https</span><br><span class="line">wget -q https://packagecloud.io/gpg.key -O - | sudo apt-key add -</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'deb https://packagecloud.io/Hypriot/Schatzkiste/debian/ wheezy main'</span> | sudo tee /etc/apt/sources.list.d/hypriot.list</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install -y docker-hypriot</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure>

<p>以非root权限运行docker</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker `whoami`</span><br></pre></td></tr></table></figure>

<p>如果没有起作用，需要重新登录</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="http://blog.hypriot.com/post/run-docker-rpi3-with-wifi/">Run Docker on a Raspberry Pi 3 with onboard WiFi</a></p>
<div><h1>Recommended Posts<span style="font-size:0.45em; color:gray">(Driven by<a href="https://github.com/huiwang/hexo-recommended-posts">Hexo Recommended Posts plugin</a>)</span></h1><ul><li><a href="https://songrgg.github.io/operation/how-to-build-a-smallest-docker-image/">how to build the smallest docker image as fast as you can</a></li><li><a href="https://songrgg.github.io/operation/install-spinnaker-on-centos/">How to install Spinnaker on CentOS 7</a></li></ul></div></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2016-10-15T22:00:00.000Z" title="2016-10-15T22:00:00.000Z">2016-10-16</time><span class="level-item"><a class="link-muted" href="/categories/programming/">programming</a></span><span class="level-item">3 minutes read (About 468 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/programming/xhprof-install-record/">xhprof安装记录</a></h1><div class="content"><blockquote>
<p>选择一个工具分析PHP函数调用的资源耗用明细，以图表化的形式展现，方便优化代码。</p>
</blockquote>
<h2 id="安装xhprof"><a href="#安装xhprof" class="headerlink" title="安装xhprof"></a>安装xhprof</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pecl install xhprof-beta</span><br></pre></td></tr></table></figure>

<p>在php.ini引用的extension中添加<code>extension=xhprof.so</code></p>
<h2 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h2><p>这里选择了xhgui，它的原理是在需要测试性能的脚本前加上PHP的一段代码，将收集到的性能数据存储到文件或者mongodb等存储介质中去。</p>
<h4 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install mongodb</span><br></pre></td></tr></table></figure>

<h4 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /var/www</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/perftools/xhgui.git</span><br><span class="line"><span class="built_in">cd</span> xhgui</span><br><span class="line">php install.php</span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果不能以root身份运行，那么sudo -u www-data php install.php</p>
</li>
<li><p>安装的时候出现<code>the requested PHP extension mongodb is missing from your system</code>问题是平台的拓展名为<strong>mongo.so</strong>，而composer检查的是<strong>mongodb.so</strong>，只要加上<code>--ignore-platform-reqs</code></p>
</li>
<li><p>如果composer问题不清楚，建议单独跑composer命令，加上-vvv打开调试模式</p>
</li>
</ul>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>如前面说的原理是在头部添加一段PHP代码，这里通过在Nginx里配置，或者PHP ini auto_prepend_file在php.ini中添加auto_prepend_file。</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~ \.php</span> &#123;</span><br><span class="line">    <span class="attribute">include</span> fastcgi_params;</span><br><span class="line">    <span class="attribute">fastcgi_buffers</span> <span class="number">128</span> <span class="number">4k</span>;</span><br><span class="line">    <span class="attribute">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">    <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">    <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">    <span class="attribute">fastcgi_param</span>  PHP_VALUE <span class="string">"auto_prepend_file=\"/opt/htdocs/xhgui/external/header.php\""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>在config目录下添加config.php配置</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'debug'</span> =&gt; <span class="keyword">false</span>,</span><br><span class="line">    <span class="string">'mode'</span> =&gt; <span class="string">'development'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Can be either mongodb or file.</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    'save.handler' =&gt; 'file',</span></span><br><span class="line"><span class="comment">    'save.handler.filename' =&gt; dirname(__DIR__) . '/cache/' . 'xhgui.data.' . microtime(true) . '_' . substr(md5($url), 0, 6),</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="string">'save.handler'</span> =&gt; <span class="string">'mongodb'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Needed for file save handler. Beware of file locking. You can adujst this file path</span></span><br><span class="line">    <span class="comment">// to reduce locking problems (eg uniqid, time ...)</span></span><br><span class="line">    <span class="comment">//'save.handler.filename' =&gt; __DIR__.'/../data/xhgui_'.date('Ymd').'.dat',</span></span><br><span class="line">    <span class="string">'db.host'</span> =&gt; <span class="string">'127.0.0.1:27017'</span>,</span><br><span class="line">    <span class="string">'db.db'</span> =&gt; <span class="string">'xhprof'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Allows you to pass additional options like replicaSet to MongoClient.</span></span><br><span class="line">    <span class="comment">// 'username', 'password' and 'db' (where the user is added)</span></span><br><span class="line">    <span class="string">'db.options'</span> =&gt; <span class="keyword">array</span>(),</span><br><span class="line">    <span class="string">'templates.path'</span> =&gt; dirname(<span class="keyword">__DIR__</span>) . <span class="string">'/src/templates'</span>,</span><br><span class="line">    <span class="string">'date.format'</span> =&gt; <span class="string">'M jS H:i:s'</span>,</span><br><span class="line">    <span class="string">'detail.count'</span> =&gt; <span class="number">6</span>,</span><br><span class="line">    <span class="string">'page.limit'</span> =&gt; <span class="number">25</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Profile 1 in 100 requests.</span></span><br><span class="line">    <span class="comment">// You can return true to profile every request.</span></span><br><span class="line">    <span class="string">'profiler.enable'</span> =&gt; <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rand(<span class="number">1</span>, <span class="number">100</span>) === <span class="number">3</span>;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">'profiler.simple_url'</span> =&gt; <span class="function"><span class="keyword">function</span><span class="params">($url)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> preg_replace(<span class="string">'/\=\d+/'</span>, <span class="string">''</span>, $url);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<div><h1>Recommended Posts<span style="font-size:0.45em; color:gray">(Driven by<a href="https://github.com/huiwang/hexo-recommended-posts">Hexo Recommended Posts plugin</a>)</span></h1><ul><li><a href="https://songrgg.github.io/programming/php7-new-features-1/">PHP7特性概览(一)</a></li><li><a href="https://songrgg.github.io/programming/php-hashtable2/">PHP7数组实现(画图版)</a></li><li><a href="https://songrgg.github.io/programming/php-hashtable/">PHP数组的内存布局</a></li></ul></div></div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/3/">Previous</a></div><div class="pagination-next"><a href="/page/5/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li><li><a class="pagination-link is-current" href="/page/4/">4</a></li><li><a class="pagination-link" href="/page/5/">5</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/8/">8</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/images/avatar.webp" alt="Songrong"></figure><p class="title is-size-4 is-block line-height-inherit">Songrong</p><p class="is-size-6 is-block">Site Reliability Engineer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Amsterdam</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">57</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">65</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/songrgg" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/songrgg"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Instagram" href="https://www.instagram.com/jiangsongrong"><i class="fab fa-instagram"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Linkedin" href="https://www.linkedin.com/in/songrong-jiang-6b2bb561"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Medium" href="https://medium.com/@songrgg0.0"><i class="fab fa-medium"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/life/"><span class="level-start"><span class="level-item">life</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/microservice/"><span class="level-start"><span class="level-item">microservice</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/operation/"><span class="level-start"><span class="level-item">operation</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/programming/"><span class="level-start"><span class="level-item">programming</span></span><span class="level-end"><span class="level-item tag">30</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><a class="media-left" href="/operation/zero-downtime-kubernetes-service-rollout/"><p class="image is-64x64"><img class="thumbnail" src="/images/rollout-with-downtime.webp" alt="Implement zero downtime HTTP service rollout on Kubernetes"></p></a><div class="media-content size-small"><p><time dateTime="2020-09-16T22:00:00.000Z">2020-09-17</time></p><p class="title is-6"><a class="link-muted" href="/operation/zero-downtime-kubernetes-service-rollout/">Implement zero downtime HTTP service rollout on Kubernetes</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/operation/">operation</a></p></div></article><article class="media"><a class="media-left" href="/programming/how-does-prometheus-query-works/"><p class="image is-64x64"><img class="thumbnail" src="/images/prometheus_grafana.webp" alt="How does Prometheus query work? - Part 1, Step, Query and Range"></p></a><div class="media-content size-small"><p><time dateTime="2020-05-31T08:27:50.000Z">2020-05-31</time></p><p class="title is-6"><a class="link-muted" href="/programming/how-does-prometheus-query-works/">How does Prometheus query work? - Part 1, Step, Query and Range</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/programming/">programming</a></p></div></article><article class="media"><a class="media-left" href="/programming/linux-namespace-part03-cgroups/"><p class="image is-64x64"><img class="thumbnail" src="/images/cgroup.webp" alt="Linux namespace in Go - Part 3, Cgroups resource limit"></p></a><div class="media-content size-small"><p><time dateTime="2020-05-21T18:21:50.000Z">2020-05-21</time></p><p class="title is-6"><a class="link-muted" href="/programming/linux-namespace-part03-cgroups/">Linux namespace in Go - Part 3, Cgroups resource limit</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/programming/">programming</a></p></div></article><article class="media"><a class="media-left" href="/programming/linux-namespace-part02-uid-mount/"><p class="image is-64x64"><img class="thumbnail" src="/images/linux_namespace_mount.webp" alt="Linux namespace in Go - Part 2, UID and Mount"></p></a><div class="media-content size-small"><p><time dateTime="2020-05-09T08:27:50.000Z">2020-05-09</time></p><p class="title is-6"><a class="link-muted" href="/programming/linux-namespace-part02-uid-mount/">Linux namespace in Go - Part 2, UID and Mount</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/programming/">programming</a></p></div></article><article class="media"><a class="media-left" href="/programming/linux-namespace-part01-uts-pid/"><p class="image is-64x64"><img class="thumbnail" src="/images/linux_namespace_pid.webp" alt="Linux namespace in Go - Part 1, UTS and PID"></p></a><div class="media-content size-small"><p><time dateTime="2020-05-02T14:27:50.000Z">2020-05-02</time></p><p class="title is-6"><a class="link-muted" href="/programming/linux-namespace-part01-uts-pid/">Linux namespace in Go - Part 1, UTS and PID</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/programming/">programming</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/alerting/"><span class="tag">alerting</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/app-channel-analytics/"><span class="tag">app channel analytics</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/architecture/"><span class="tag">architecture</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/automation/"><span class="tag">automation</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/centos/"><span class="tag">centos</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/certificate/"><span class="tag">certificate</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cgroups/"><span class="tag">cgroups</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chaos-engineering/"><span class="tag">chaos engineering</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cicd/"><span class="tag">cicd</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/client-performance/"><span class="tag">client performance</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/configuration-management/"><span class="tag">configuration management</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/data-center-failover/"><span class="tag">data center failover</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/data-structure/"><span class="tag">data structure</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/database-read-write-split/"><span class="tag">database read write split</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dependency-injection/"><span class="tag">dependency injection</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/distributed-system/"><span class="tag">distributed system</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/django/"><span class="tag">django</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-compose/"><span class="tag">docker-compose</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/envoy/"><span class="tag">envoy</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/etcd/"><span class="tag">etcd</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/fault-tolerance/"><span class="tag">fault tolerance</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gRPC/"><span class="tag">gRPC</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go-micro/"><span class="tag">go-micro</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/golang/"><span class="tag">golang</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/grafana/"><span class="tag">grafana</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/groovy/"><span class="tag">groovy</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hive/"><span class="tag">hive</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/influxdb/"><span class="tag">influxdb</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/interview/"><span class="tag">interview</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/istio/"><span class="tag">istio</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kubernetes/"><span class="tag">kubernetes</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leveldb/"><span class="tag">leveldb</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machine-learning/"><span class="tag">machine learning</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mahout/"><span class="tag">mahout</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/microservice/"><span class="tag">microservice</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/migration/"><span class="tag">migration</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/monitoring/"><span class="tag">monitoring</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql/"><span class="tag">mysql</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/namespace/"><span class="tag">namespace</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/oauth2/"><span class="tag">oauth2</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/operation/"><span class="tag">operation</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/php/"><span class="tag">php</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/prometheus/"><span class="tag">prometheus</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/raspberry/"><span class="tag">raspberry</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ratelimiter/"><span class="tag">ratelimiter</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/request-analysis/"><span class="tag">request analysis</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/resilience/"><span class="tag">resilience</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rollout/"><span class="tag">rollout</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/service-degrade/"><span class="tag">service degrade</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/service-mesh/"><span class="tag">service mesh</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/service-orchestration/"><span class="tag">service orchestration</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sidecar/"><span class="tag">sidecar</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spark/"><span class="tag">spark</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spinnaker/"><span class="tag">spinnaker</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring/"><span class="tag">spring</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring-boot/"><span class="tag">spring boot</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sre/"><span class="tag">sre</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swagger/"><span class="tag">swagger</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/universal-link/"><span class="tag">universal link</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wechat/"><span class="tag">wechat</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xhprof/"><span class="tag">xhprof</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">SongRong&#039;s Experience</a><p class="size-small"><span>&copy; 2020 songrgg</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://songrgg.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>