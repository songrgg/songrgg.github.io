!function(h,a){var t=h(".ins-search"),n=t.find(".ins-search-input"),s=t.find(".ins-section-wrapper"),g=t.find(".ins-section-container");function r(n,t,e,i,s){return h("<div>").addClass("ins-selectable").addClass("ins-search-item").append(h("<header>").append(h("<i>").addClass("fa").addClass("fa-"+n)).append(h("<span>").addClass("ins-title").text(null!=t&&""!==t?t:a.TRANSLATION.UNTITLED)).append(e?h("<span>").addClass("ins-slug").text(e):null)).append(i?h("<p>").addClass("ins-search-preview").text(i):null).attr("data-url",s)}function v(t,n){var e,i,s;if(0===n.length)return null;switch(e=a.TRANSLATION[t],t){case"POSTS":case"PAGES":i=n.map(function(n){return r("file",n.title,null,n.text.slice(0,150),n.link)});break;case"CATEGORIES":case"TAGS":i=n.map(function(n){return r("CATEGORIES"===t?"folder":"tag",n.name,n.slug,null,n.link)});break;default:return null}return s=e,h("<section>").addClass("ins-section").append(h("<header>").addClass("ins-section-header").text(s)).append(i)}function o(n){return n.split(" ").filter(function(n){return!!n}).map(function(n){return n.toUpperCase()})}function C(n,e,i){var t=o(n);return t.filter(function(t){return 0<i.filter(function(n){return!!e.hasOwnProperty(n)&&(-1<e[n].toUpperCase().indexOf(t)||void 0)}).length}).length===t.length}function m(n,s,t,a){var r=0;return o(n).forEach(function(n){var i=new RegExp(n,"img");t.forEach(function(n,t){if(s.hasOwnProperty(n)){var e=s[n].match(i);r+=e?e.length*a[t]:0}})}),r}function e(n){var t=h.makeArray(g.find(".ins-selectable")),e=-1;t.forEach(function(n,t){h(n).hasClass("active")&&(e=t)});var i=(t.length+e+n)%t.length;h(t[e]).removeClass("active"),h(t[i]).addClass("active"),function(n){if(0!==n.length){var t=s[0].clientHeight,e=n.position().top-s.scrollTop(),i=n[0].clientHeight+n.position().top;i>t+s.scrollTop()&&s.scrollTop(i-s[0].clientHeight),e<0&&s.scrollTop(n.position().top)}}(h(t[i]))}function i(n){n&&n.length&&(location.href=n.attr("data-url"))}t.parent().remove(".ins-search"),h("body").append(t),h.getJSON(a.CONTENT_URL,function(d){"#ins-search"===location.hash.trim()&&t.addClass("show"),n.on("input",function(){var n,t,e,i,s,a,r,o,c,l,u,f,p=h(this).val();!function(n){for(var t in g.empty(),n)g.append(v(t.toUpperCase(),n[t]))}((i=function(n){return m(t,n,["title","text"],[3,1])},s=function(n){return m(t,n,["title","text"],[3,1])},a=function(n){return m(t,n,["name","slug"],[1,1])},r=function(n){return m(t,n,["name","slug"],[1,1])},e=t=p,o={POST:function(n){return C(e,n,["title","text"])},PAGE:function(n){return C(e,n,["title","text"])},CATEGORY:function(n){return C(e,n,["name","slug"])},TAG:function(n){return C(e,n,["name","slug"])}},c=(n=d).posts,l=n.pages,u=n.tags,f=n.categories,{posts:c.filter(o.POST).sort(function(n,t){return i(t)-i(n)}).slice(0,5),pages:l.filter(o.PAGE).sort(function(n,t){return s(t)-s(n)}).slice(0,5),categories:f.filter(o.CATEGORY).sort(function(n,t){return a(t)-a(n)}).slice(0,5),tags:u.filter(o.TAG).sort(function(n,t){return r(t)-r(n)}).slice(0,5)}))}),n.trigger("input")});var c=!1;h(document).on("click focus",".navbar-main .search",function(){t.addClass("show"),t.find(".ins-search-input").focus()}).on("click touchend",".ins-search-item",function(n){"click"!==n.type&&!c||(i(h(this)),c=!1)}).on("click touchend",".ins-close",function(n){"click"!==n.type&&!c||(h(".navbar-main").css("pointer-events","none"),setTimeout(function(){h(".navbar-main").css("pointer-events","auto")},400),t.removeClass("show"),c=!1)}).on("keydown",function(n){if(t.hasClass("show"))switch(n.keyCode){case 27:t.removeClass("show");break;case 38:e(-1);break;case 40:e(1);break;case 13:i(g.find(".ins-selectable.active").eq(0))}}).on("touchstart",function(n){c=!0}).on("touchmove",function(n){c=!1})}(jQuery,window.INSIGHT_CONFIG);